<div id="container" style="width:100%; height:600px; overflow:hidden; position:relative; background:#fff; cursor:grab;">
    <div id="inner" style="display:inline-block; transform-origin:0 0;">
        <div class="mermaid" id="diagram">
            sequenceDiagram
            participant Alice
            participant Bob
            Alice->>Bob: Hello Bob, how are you?
            Bob-->>Alice: I am good thanks!
            Alice-)Bob: See you later!
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.13.10/mermaid.min.js"></script>
<script>
    mermaid.initialize({ startOnLoad: true });

    const container = document.getElementById('container');
    const inner = document.getElementById('inner');

    let scale = 1.0;
    let originX = 0;
    let originY = 0;
    let isPanning = false;
    let startX, startY;

    container.addEventListener('wheel', function (e) {
        e.preventDefault();
        const zoomFactor = 1.1;
        const oldScale = scale;
        scale *= e.deltaY < 0 ? zoomFactor : 1 / zoomFactor;

        const rect = inner.getBoundingClientRect();
        const offsetX = e.clientX - rect.left;
        const offsetY = e.clientY - rect.top;

        originX = (offsetX + originX) * (scale / oldScale) - offsetX;
        originY = (offsetY + originY) * (scale / oldScale) - offsetY;
        applyTransform();
    });

    container.addEventListener('mousedown', function (e) {
        isPanning = true;
        startX = e.clientX;
        startY = e.clientY;
        container.style.cursor = 'grabbing';
    });

    container.addEventListener('mousemove', function (e) {
        if (!isPanning) return;
        const dx = e.clientX - startX;
        const dy = e.clientY - startY;
        startX = e.clientX;
        startY = e.clientY;
        originX -= dx;
        originY -= dy;
        applyTransform();
    });

    container.addEventListener('mouseup', function () {
        isPanning = false;
        container.style.cursor = 'grab';
    });

    container.addEventListener('mouseleave', function () {
        isPanning = false;
        container.style.cursor = 'grab';
    });

    function applyTransform() {
        inner.style.transform = `translate(${-originX}px, ${-originY}px) scale(${scale})`;
    }
</script>